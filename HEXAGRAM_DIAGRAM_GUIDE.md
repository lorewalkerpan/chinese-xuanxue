# 卦象图说明文档

## 📊 卦象图格式说明

本系统现在会在API响应中返回**可视化的卦象图**，让您更直观地看到卦象结构。

---

## 一、卦象图结构

### 完整格式示例

```
┌─────────────────────────┐
│   火雷噬嗑   │
├─────────────────────────┤
│ ━  ━  第6爻：老阳 ★动爻 │
│ ━  ━  第5爻：少阴 │
│ ━━━━━  第4爻：少阳 │
├─ 上卦：☲ 离（火） ─┤
│ ━━━━━  第3爻：少阳 │
│ ━  ━  第2爻：少阴 │
│ ━  ━  第1爻：老阴 ★动爻 │
├─ 下卦：☳ 震（雷） ─┤
└─────────────────────────┘
```

---

## 二、图形元素解释

### 1. 爻的图形表示

| 符号 | 含义 | 说明 |
|------|------|------|
| `━━━━━` | 阳爻（实线） | 完整的一条线，代表阳 |
| `━  ━` | 阴爻（断线） | 中间断开的线，代表阴 |

### 2. 爻的类型标识

| 标识 | 含义 | 会变吗 |
|------|------|--------|
| 老阳 | 阳爻，阳极 | ✅ 会变成阴 |
| 少阳 | 阳爻，稳定 | ❌ 不变 |
| 老阴 | 阴爻，阴极 | ✅ 会变成阳 |
| 少阴 | 阴爻，稳定 | ❌ 不变 |

### 3. 特殊标记

| 符号 | 含义 | 说明 |
|------|------|------|
| `★动爻` | 变爻标记 | 表示此爻会发生变化（老阳或老阴） |
| `☰☱☲☳☴☵☶☷` | 八卦符号 | 代表乾兑离震巽坎艮坤 |

### 4. 边框说明

```
┌─────────────────────────┐  ← 顶部边框
│                         │  ← 左右边框
├─────────────────────────┤  ← 分隔线
└─────────────────────────┘  ← 底部边框
```

---

## 三、阅读方向

### 📖 从下往上读

```
第6爻 ← 最上面（上爻）
第5爻
第4爻 ← 上卦最下
──────── 上下卦分界
第3爻 ← 下卦最上
第2爻
第1爻 ← 最下面（初爻）
```

**重要提示**：
- 卦象**自下而上**排列
- 第1爻在**最下面**
- 第6爻在**最上面**

---

## 四、实际案例解读

### 案例1：纯阳卦（乾卦）

```
┌─────────────────────────┐
│   乾为天   │
├─────────────────────────┤
│ ━━━━━  第6爻：老阳 ★动爻 │
│ ━━━━━  第5爻：老阳 ★动爻 │
│ ━━━━━  第4爻：老阳 ★动爻 │
├─ 上卦：☰ 乾（天） ─┤
│ ━━━━━  第3爻：老阳 ★动爻 │
│ ━━━━━  第2爻：老阳 ★动爻 │
│ ━━━━━  第1爻：老阳 ★动爻 │
├─ 下卦：☰ 乾（天） ─┤
└─────────────────────────┘
```

**解读**：
- ✅ 六爻全阳，大吉之卦
- ✅ 全部为老阳，全部会变
- ✅ 上下卦都是乾卦

---

### 案例2：有变爻的卦（天水讼）

```
┌─────────────────────────┐
│   天水讼   │
├─────────────────────────┤
│ ━━━━━  第6爻：少阳 │
│ ━━━━━  第5爻：少阳 │
│ ━━━━━  第4爻：少阳 │
├─ 上卦：☰ 乾（天） ─┤
│ ━━━━━  第3爻：老阴 ★动爻 │
│ ━━━━━  第2爻：少阳 │
│ ━  ━  第1爻：老阴 ★动爻 │
├─ 下卦：☵ 坎（水） ─┤
└─────────────────────────┘
```

**解读**：
- 🔹 上卦：乾（天），三个阳爻
- 🔹 下卦：坎（水），阳-阴-阳结构
- ⭐ 第1爻和第3爻有★标记，是动爻
- 📈 这两个爻会发生变化，产生变卦

---

### 案例3：静卦（无变爻）

```
┌─────────────────────────┐
│   地天泰   │
├─────────────────────────┤
│ ━  ━  第6爻：少阴 │
│ ━  ━  第5爻：少阴 │
│ ━  ━  第4爻：少阴 │
├─ 上卦：☷ 坤（地） ─┤
│ ━━━━━  第3爻：少阳 │
│ ━━━━━  第2爻：少阳 │
│ ━━━━━  第1爻：少阳 │
├─ 下卦：☰ 乾（天） ─┤
└─────────────────────────┘
```

**解读**：
- ✅ 没有★动爻标记
- ✅ 全部是少阳或少阴，不会变
- ✅ 这是静卦，以本卦断吉凶

---

## 五、API响应中的卦象图

### JSON字段说明

```json
{
  "originalHexagramDiagram": "本卦的卦象图（带边框）",
  "changedHexagramDiagram": "变卦的卦象图（带边框，如果有）"
}
```

### 显示建议

**在前端/终端显示时**：

```javascript
// JavaScript 示例
console.log(result.originalHexagramDiagram);

// 输出效果：
┌─────────────────────────┐
│   火雷噬嗑   │
├─────────────────────────┤
│ ━  ━  第6爻：老阳 ★动爻 │
...
└─────────────────────────┘
```

**使用HTML显示**：

```html
<pre style="font-family: monospace;">
  {{ result.originalHexagramDiagram }}
</pre>
```

**使用等宽字体**：
- 推荐字体：Consolas, Monaco, "Courier New", monospace
- 确保中文和英文字符对齐

---

## 六、八卦符号对照表

| 八卦 | 符号 | 自然象征 | 二进制 | 卦象 |
|------|------|---------|--------|------|
| 乾 | ☰ | 天 | 111 | ━━━━━<br>━━━━━<br>━━━━━ |
| 兑 | ☱ | 泽 | 011 | ━  ━<br>━━━━━<br>━━━━━ |
| 离 | ☲ | 火 | 101 | ━━━━━<br>━  ━<br>━━━━━ |
| 震 | ☳ | 雷 | 001 | ━  ━<br>━  ━<br>━━━━━ |
| 巽 | ☴ | 风 | 110 | ━━━━━<br>━━━━━<br>━  ━ |
| 坎 | ☵ | 水 | 010 | ━  ━<br>━━━━━<br>━  ━ |
| 艮 | ☶ | 山 | 100 | ━━━━━<br>━  ━<br>━  ━ |
| 坤 | ☷ | 地 | 000 | ━  ━<br>━  ━<br>━  ━ |

---

## 七、使用技巧

### 1. 快速识别卦象

```
看上下卦 → 找到八卦符号
看动爻   → 找到★标记
看变化   → 对比本卦和变卦
```

### 2. 保存卦象图

```bash
# 使用curl保存到文件
curl http://localhost:8080/sixyao/api/divination/generate | \
  jq -r '.data.originalHexagramDiagram' > hexagram.txt

# 查看
cat hexagram.txt
```

### 3. 打印输出

使用等宽字体打印，确保边框和符号对齐。

---

## 八、常见问题

### Q1：为什么要从下往上读？

**A**：这是《周易》的传统规则。卦象模拟事物发展，从基础（底部）到顶峰（顶部），符合自然规律。

### Q2：动爻★标记有什么用？

**A**：标记哪些爻会变化。有动爻意味着局势会发生转变，需要结合变卦分析。

### Q3：上下卦的分界线在哪里？

**A**：第3爻和第4爻之间。下卦包含1-3爻，上卦包含4-6爻。

### Q4：如果没有变卦怎么办？

**A**：`changedHexagramDiagram`字段会是`null`，表示这是静卦，只看本卦即可。

---

## 九、对比示例

### 本卦 vs 变卦

**本卦（火雷噬嗑）**：
```
┌─────────────────────────┐
│   火雷噬嗑   │
├─────────────────────────┤
│ ━  ━  第6爻：老阳 ★动爻 │  ← 会变！
│ ━  ━  第5爻：少阴 │
│ ━━━━━  第4爻：少阳 │
├─ 上卦：☲ 离（火） ─┤
│ ━━━━━  第3爻：少阳 │
│ ━  ━  第2爻：少阴 │
│ ━  ━  第1爻：老阴 ★动爻 │  ← 会变！
├─ 下卦：☳ 震（雷） ─┤
└─────────────────────────┘
```

**变卦（山火贲）**：
```
┌─────────────────────────┐
│   山火贲   │
├─────────────────────────┤
│ ━  ━  第6爻：少阴 │  ← 变了（老阳→少阴）
│ ━  ━  第5爻：少阴 │
│ ━━━━━  第4爻：少阳 │
├─ 上卦：☶ 艮（山） ─┤
│ ━━━━━  第3爻：少阳 │
│ ━  ━  第2爻：少阴 │
│ ━━━━━  第1爻：少阳 │  ← 变了（老阴→少阳）
├─ 下卦：☲ 离（火） ─┤
└─────────────────────────┘
```

**变化对比**：
- 第1爻：`━  ━ 老阴` → `━━━━━ 少阳` （阴变阳）
- 第6爻：`━  ━ 老阳` → `━  ━ 少阴` （阳变阴）
- 上卦变了：离（火）→ 艮（山）
- 下卦变了：震（雷）→ 离（火）

---

## 十、总结

✅ **卦象图的优势**：
1. 直观可视化，一眼看清卦象结构
2. 清楚标记动爻位置
3. 明确显示上下卦组合
4. 方便保存和分享

✅ **阅读要点**：
1. 从下往上读（第1爻在底部）
2. 关注★动爻标记
3. 对比本卦和变卦的差异
4. 结合卦辞和象辞解读

✅ **技术要点**：
1. 使用等宽字体显示
2. 保持字符对齐
3. JSON中的`\n`会换行

现在您可以通过API直接获得美观的卦象图了！🎉

